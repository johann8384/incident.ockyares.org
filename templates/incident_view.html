                    // Add label in center of division
                    const center = divisionPolygon.getBounds().getCenter();
                    const divisionLetter = division.division_id ? division.division_id.replace('DIV-', '') : (division.name || 'X');
                    const label = L.marker(center, {
                        icon: L.divIcon({
                            className: 'division-label',
                            html: `<div style="background: white; border: 2px solid ${color}; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px;">${divisionLetter}</div>`,
                            iconSize: [30, 30],
                            iconAnchor: [15, 15]
                        })
                    }).addTo(divisionsGroup);
                    
                    const popupContent = `
                        <b>${division.division_name || division.name}</b><br>
                        <strong>Status:</strong> ${(division.status || 'unassigned').toUpperCase()}<br>
                        <strong>Unit:</strong> ${division.assigned_team || 'Not assigned'}<br>
                        <strong>Officer:</strong> ${division.team_leader || 'Not assigned'}
                    `;